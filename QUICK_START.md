# üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ wg-easy (–¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)

> **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 28.10.2025  
> **–¶–µ–ª—å:** –ó–∞–ø—É—Å—Ç–∏—Ç—å VPN –∑–∞ 10 –º–∏–Ω—É—Ç –±–µ–∑ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞

---

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –ë—ã–ª–æ: linuxserver/wireguard
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ OpenVZ (–∑–∞–≤–∏—Å–∞–µ—Ç)
- ‚ùå –ù–µ—Ç –≤–µ–±-–ø–∞–Ω–µ–ª–∏
- ‚ùå –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ peers

### –°—Ç–∞–ª–æ: wg-easy
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ OpenVZ (userspace)
- ‚úÖ –í–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ QR-–∫–æ–¥—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

---

## üéØ –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π docker-compose.yml –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (PowerShell)
scp docker-compose.yml root@31.28.27.96:/opt/vpn/docker-compose.yml
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SSH:

```bash
ssh root@31.28.27.96
cd /opt/vpn

# –ë—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–≥–æ —Ñ–∞–π–ª–∞
cp docker-compose.yml docker-compose.yml.backup

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π docker-compose.yml
cat > docker-compose.yml <<'EOF'
services:
  wg-easy:
    image: ghcr.io/wg-easy/wg-easy:latest
    container_name: wg-easy
    cap_add:
      - NET_ADMIN
      - SYS_MODULE
    environment:
      - WG_HOST=31.28.27.96
      - PASSWORD=–ò–ó–ú–ï–ù–ò–¢–ï_–≠–¢–û–¢_–ü–ê–†–û–õ–¨_123
      - WG_PORT=51820
      - WG_DEFAULT_ADDRESS=10.13.13.x
      - WG_DEFAULT_DNS=1.1.1.1,1.0.0.1
      - WG_ALLOWED_IPS=0.0.0.0/0,::/0
      - WG_PERSISTENT_KEEPALIVE=25
      - WG_MTU=1420
      - UI_TRAFFIC_STATS=true
      - UI_CHART_TYPE=1
      - LANG=ru
    volumes:
      - ./config:/etc/wireguard
    ports:
      - "51820:51820/udp"
      - "51821:51821/tcp"
    devices:
      - /dev/net/tun:/dev/net/tun
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
      - net.ipv4.ip_forward=1
    restart: unless-stopped
EOF
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ `–ò–ó–ú–ï–ù–ò–¢–ï_–≠–¢–û–¢_–ü–ê–†–û–õ–¨_123` –Ω–∞ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å!

---

## üéØ –®–∞–≥ 2: –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
ssh root@31.28.27.96
cd /opt/vpn

# –ë—ç–∫–∞–ø —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
tar -czf config.backup.$(date +%Y%m%d_%H%M%S).tar.gz config/

# –û—á–∏—Å—Ç–∏—Ç—å config (wg-easy —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
rm -rf config/*
```

---

## üéØ –®–∞–≥ 3: –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 51821 (–≤–µ–±-–ø–∞–Ω–µ–ª—å)

```bash
ssh root@31.28.27.96

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall
sudo ufw status

# –ï—Å–ª–∏ UFW –∞–∫—Ç–∏–≤–µ–Ω - –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç
sudo ufw allow 51821/tcp comment 'wg-easy web UI'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
sudo ufw status | grep 51821
```

---

## üéØ –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å wg-easy

```bash
ssh root@31.28.27.96
cd /opt/vpn

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose pull
docker compose up -d

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 10 —Å–µ–∫—É–Ω–¥
sleep 10

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps | grep wg-easy

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker logs wg-easy
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Container wg-easy Running
   Up 20 seconds
   0.0.0.0:51820->51820/udp
   0.0.0.0:51821->51821/tcp
```

---

## üéØ –®–∞–≥ 5: –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–ø–∞–Ω–µ–ª—å

### –í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ:
```
http://31.28.27.96:51821
```

### –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤ docker-compose.yml

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
- üü¢ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å wg-easy
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø–æ–∫–∞ –ø—É—Å—Ç–∞—è)
- ‚ûï –ö–Ω–æ–ø–∫–∞ "New Client"

---

## üéØ –®–∞–≥ 6: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (—Å–µ–±—è)

### –í –≤–µ–±-–ø–∞–Ω–µ–ª–∏:

1. –ù–∞–∂–º–∏—Ç–µ **"+ New Client"**
2. –í–≤–µ–¥–∏—Ç–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: `marina-laptop`)
3. –ù–∞–∂–º–∏—Ç–µ **"Create"**

### –ü–æ—è–≤–∏—Ç—Å—è –∫–ª–∏–µ–Ω—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏:
- üì± **QR Code** ‚Äî –ø–æ–∫–∞–∂–µ—Ç QR –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- üìÑ **Config** ‚Äî —Å–∫–∞—á–∞—Ç—å .conf —Ñ–∞–π–ª –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
- ‚¨áÔ∏è **Download** ‚Äî —Å–∫–∞—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

---

## üéØ –®–∞–≥ 7: –ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

### –î–ª—è –Ω–æ—É—Ç–±—É–∫–∞ (Windows/Mac/Linux):

1. –í –≤–µ–±-–ø–∞–Ω–µ–ª–∏ –Ω–∞–∂–º–∏—Ç–µ **Download** —Ä—è–¥–æ–º —Å –∫–ª–∏–µ–Ω—Ç–æ–º
2. –°–∫–∞—á–∞–µ—Ç—Å—è —Ñ–∞–π–ª `marina-laptop.conf`
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard
4. –ù–∞–∂–º–∏—Ç–µ **Import from file**
5. –í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π .conf
6. –ù–∞–∂–º–∏—Ç–µ **Activate**

### –î–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **WireGuard** –∏–∑ App Store/Google Play
2. –í –≤–µ–±-–ø–∞–Ω–µ–ª–∏ –Ω–∞–∂–º–∏—Ç–µ **QR Code** —Ä—è–¥–æ–º —Å –∫–ª–∏–µ–Ω—Ç–æ–º
3. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞–∂–º–∏—Ç–µ **"+"** ‚Üí **Create from QR code**
4. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
5. –ù–∞–∂–º–∏—Ç–µ **Activate**

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º VPN:

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://whoer.net
2. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   - IP: `31.28.27.96` (IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
   - –õ–æ–∫–∞—Ü–∏—è: –†–æ—Å—Å–∏—è (–∏–ª–∏ –≥–¥–µ —Å–µ—Ä–≤–µ—Ä)

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
ssh root@31.28.27.96
docker exec wg-easy wg show
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
interface: wg0
  peer: [–∫–ª—é—á –∫–ª–∏–µ–Ω—Ç–∞]
    endpoint: [–≤–∞—à IP]:[–ø–æ—Ä—Ç]
    allowed ips: 10.13.13.x/32
    latest handshake: 1 second ago  ‚Üê –ê–ö–¢–ò–í–ù–û!
    transfer: X KB received, Y KB sent
```

---

## üë• –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–ø–∞–Ω–µ–ª—å http://31.28.27.96:51821
2. –ù–∞–∂–º–∏—Ç–µ **"+ New Client"**
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: `grisha-phone`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ QR-–∫–æ–¥ –∏–ª–∏ .conf —Ñ–∞–π–ª —á–µ–ª–æ–≤–µ–∫—É
5. –û–Ω–∏ —Å–∫–∞–Ω–∏—Ä—É—é—Ç/–∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –∏ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è

### –†–µ–∫–æ–º–µ–Ω–¥—É—é —Å–æ–∑–¥–∞—Ç—å:

```
marina-laptop
marina-iphone
grisha-laptop
grisha-phone
–º–∞–º–∞-phone
–ø–∞–ø–∞-laptop
...
```

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å

### –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

- ‚ûï **–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞** ‚Äî New Client
- üóëÔ∏è **–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞** ‚Äî –∫–Ω–æ–ø–∫–∞ Delete
- ‚úèÔ∏è **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å** ‚Äî –∫–Ω–æ–ø–∫–∞ Edit
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –≥—Ä–∞—Ñ–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞
- üîÑ **–í–∫–ª/–í—ã–∫–ª –∫–ª–∏–µ–Ω—Ç–∞** ‚Äî Enable/Disable
- üì± **QR-–∫–æ–¥** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–Ω–æ–≤–æ

---

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:

```bash
docker logs wg-easy
```

–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö.

### –í–µ–±-–ø–∞–Ω–µ–ª—å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
sudo ss -lntp | grep 51821

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall
sudo ufw status | grep 51821

# –ï—Å–ª–∏ –∑–∞–∫—Ä—ã—Ç–æ - –æ—Ç–∫—Ä–æ–π—Ç–µ
sudo ufw allow 51821/tcp
```

### –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ WireGuard –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
docker exec wg-easy wg show

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 51820
sudo ss -lunp | grep 51820
```

---

## üìã –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞ (—Ä–∞–∑ –≤ –º–µ—Å—è—Ü):

```bash
ssh root@31.28.27.96
cd /opt/vpn
docker compose pull
docker compose up -d
```

### Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é):

```bash
ssh root@31.28.27.96
cd /opt/vpn
tar -czf backup/config.$(date +%Y%m%d).tar.gz config/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:

```bash
ssh root@31.28.27.96
docker exec wg-easy wg show
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–π VPN –Ω–∞ OpenVZ
- ‚úÖ –í–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ QR-–∫–æ–¥—ã –∞–≤—Ç–æ–º–∞—Ç–æ–º
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤—Å–µ—Ö –¥—Ä—É–∑–µ–π/—Å–µ–º—å—é –∏ —Å–æ–±–µ—Ä–∏—Ç–µ —Ñ–∏–¥–±–µ–∫! üöÄ

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º. [STRATEGY.md](STRATEGY.md) –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø–ª–∞–Ω–∞.
