# OpenVZ Virtualization Issues - Detailed Report

**Ð”Ð°Ñ‚Ð°:** 28 Ð¾ÐºÑ‚ÑÐ±Ñ€Ñ 2025  
**Ð¡ÐµÑ€Ð²ÐµÑ€:** 31.28.27.96 (Ubuntu 22.04, OpenVZ)  
**Ð¦ÐµÐ»ÑŒ:** Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ WireGuard VPN

---

## ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ñ€ÐµÐ·ÑŽÐ¼Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

OpenVZ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ **ÐÐ• ÐŸÐžÐ”Ð”Ð•Ð Ð–Ð˜Ð’ÐÐ•Ð¢** WireGuard kernel module Ð¸Ð·-Ð·Ð° Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ñ… Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ð¹. Ð’ÑÐµ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ WireGuard-based Ñ€ÐµÑˆÐµÐ½Ð¸Ñ ÑÑ‚Ð¾Ð»ÐºÐ½ÑƒÐ»Ð¸ÑÑŒ Ñ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ð¼Ð¸.

---

## Ð¥Ñ€Ð¾Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº

### 1. ÐŸÐ¾Ð¿Ñ‹Ñ‚ÐºÐ° â„–1: linuxserver/wireguard (FAILED)

**ÐžÐ±Ñ€Ð°Ð·:** `lscr.io/linuxserver/wireguard:latest`  
**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** âŒ ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð·Ð°Ð²Ð¸ÑÐ°ÐµÑ‚ Ð½Ð° ÑÑ‚Ð°Ñ€Ñ‚Ðµ

#### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°
```bash
[cont-init.d] 30-module: executing...
Uname info: Linux 7a8eb6cd0e08 2.6.32-042stab162.2 #1 SMP Thu Jun 9 12:05:33 MSK 2022 x86_64 x86_64 x86_64 GNU/Linux
**** It seems the wireguard module is already active. Skipping kernel header install and module compilation. ****
**** The module is not active, will attempt kernel header install and module compilation. ****
Kernel headers don't seem to be available, will try to install
# Ð—ÐÐ’Ð˜Ð¡ÐÐÐ˜Ð• Ð—Ð”Ð•Ð¡Ð¬ - ÑÐºÑ€Ð¸Ð¿Ñ‚ ÑƒÑ…Ð¾Ð´Ð¸Ñ‚ Ð² sleep infinity
```

#### ÐÐ½Ð°Ð»Ð¸Ð· ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ñ‹
Ð¤Ð°Ð¹Ð» `/etc/s6-overlay/s6-rc.d/init-wireguard-module/run` ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:

```bash
if lsmod | grep wireguard; then
    # ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ð°ÐºÑ‚Ð¸Ð²ÐµÐ½
else
    # ÐŸÑ‹Ñ‚Ð°ÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ kernel headers
    # ÐÐ OPENVZ Ð­Ð¢Ðž ÐÐ•Ð’ÐžÐ—ÐœÐžÐ–ÐÐž
    # Ð—Ð°Ñ‚ÐµÐ¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚: exec sleep infinity
fi
```

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° Ð·Ð°Ð²Ð¸ÑÐ°Ð½Ð¸Ñ:** OpenVZ Ð½Ðµ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº kernel headers Ñ…Ð¾ÑÑ‚-ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹. Container Ð¿Ñ‹Ñ‚Ð°ÐµÑ‚ÑÑ Ð¸Ñ… ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ, Ñ‚ÐµÑ€Ð¿Ð¸Ñ‚ Ð½ÐµÑƒÐ´Ð°Ñ‡Ñƒ Ð¸ ÑƒÑ…Ð¾Ð´Ð¸Ñ‚ Ð² Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ð¹ ÑÐ¾Ð½.

#### Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð´ÐµÑ‚Ð°Ð»ÑŒ
OpenVZ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ **shared kernel** Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ - Ð²ÑÐµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ ÑÐ´Ñ€Ð¾ Ñ…Ð¾ÑÑ‚Ð°. ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð½Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ kernel modules, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹ Ð½Ð° Ñ…Ð¾ÑÑ‚Ðµ.

---

### 2. ÐŸÐ¾Ð¿Ñ‹Ñ‚ÐºÐ° â„–2: wg-easy (FAILED)

**ÐžÐ±Ñ€Ð°Ð·:** `ghcr.io/wg-easy/wg-easy:latest`  
**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** âŒ ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ WireGuard Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ

#### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°
```
2025-10-28T15:54:27.345Z WireGuard Configuration generated.
Error: WireGuard exited with the error: Cannot find device "wg0"
This usually means that your host's kernel does not support WireGuard!
```

#### ÐÐ½Ð°Ð»Ð¸Ð·
wg-easy Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ `wg-quick up wg0` Ð¸ `wg-quick down wg0`, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚:
1. Kernel module `wireguard` Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ð¼ Ð½Ð° Ñ…Ð¾ÑÑ‚Ðµ
2. Ð˜Ð»Ð¸ userspace implementation Ñ‡ÐµÑ€ÐµÐ· `wireguard-go`

ÐÐ° Ð½Ð°ÑˆÐµÐ¼ OpenVZ ÑÐµÑ€Ð²ÐµÑ€Ðµ:
- âœ… `wg-quick` ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½: `/usr/bin/wg-quick`
- âŒ `wireguard-go` ÐÐ• ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
- âŒ Kernel module Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð¾ Ñ‡ÐµÑ€ÐµÐ· `lsmod | grep wireguard` - Ð¿ÑƒÑÑ‚Ð¾)

#### Ð ÐµÑˆÐµÐ½Ð¸Ðµ (Ð½Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾)
ÐÑƒÐ¶Ð½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ `wireguard-go` Ð½Ð° Ñ…Ð¾ÑÑ‚-ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ wg-easy Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ userspace Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸.

```bash
# ÐÐ° Ñ…Ð¾ÑÑ‚Ðµ
apt install wireguard-tools wireguard-go
export WG_QUICK_USERSPACE_IMPLEMENTATION=wireguard-go
```

ÐÐ¾ ÑÑ‚Ð¾ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¾Ð±Ñ€Ð°Ð·Ð° wg-easy Ð¸Ð»Ð¸ Ð¼Ð¾Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ wireguard-go Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€.

---

### 3. ÐŸÐ¾Ð¿Ñ‹Ñ‚ÐºÐ° â„–3: wg-access-server (FAILED)

**ÐžÐ±Ñ€Ð°Ð·:** `ghcr.io/freifunkmuc/wg-access-server:latest`  
**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** âŒ Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ WireGuard private key, Ð½Ð¾ Ð·Ð°Ñ‚ÐµÐ¼ Ñ‚Ð° Ð¶Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ device

#### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹
1. **ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ:** Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ ÑÐ²Ð½Ð¾Ð³Ð¾ ÑƒÐºÐ°Ð·Ð°Ð½Ð¸Ñ `WIREGUARD_PRIVATE_KEY` Ð² environment
2. **Ð¢Ð° Ð¶Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ kernel module:** ÐŸÐ¾ÑÐ»Ðµ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÐºÐ»ÑŽÑ‡Ð° ÑÑ‚Ð¾Ð»ÐºÐ½ÐµÐ¼ÑÑ Ñ "Cannot find device wg0"

#### Ð§Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾ ÑÐ´ÐµÐ»Ð°Ð½Ð¾
```yaml
environment:
  - WIREGUARD_PRIVATE_KEY=QOSeG+roCyqX7qZngIoT5tkOMSNiZD3aIX2ajMNx2lQ=
  - WG_ADMIN_PASSWORD=PocketPortal2025Secure
  - WG_EXTERNAL_HOST=31.28.27.96
```

ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ð»ÑÑ, Ð½Ð¾ Ñ†Ð¸ÐºÐ»Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð°Ð´Ð°Ð» Ñ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸ÐµÐ¼:
```
level=fatal msg="Missing WireGuard private key"
```

Ð”Ð°Ð¶Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ»ÑŽÑ‡Ð° Ð² environment, Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð½Ðµ Ñ‡Ð¸Ñ‚Ð°Ð»Ð°ÑÑŒ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾. ÐŸÐ¾Ð¿Ñ‹Ñ‚ÐºÐ¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ `config.yaml` Ñ‚Ð°ÐºÐ¶Ðµ Ð½Ðµ Ð¿Ñ€Ð¸Ð½ÐµÑÐ»Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð° Ð¸Ð·-Ð·Ð° Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼ Ñ PowerShell heredoc ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸ÑÐ¾Ð¼.

---

### 4. ÐŸÐ¾Ð¿Ñ‹Ñ‚ÐºÐ° â„–4: Outline VPN (IN PROGRESS)

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** `https://github.com/Jigsaw-Code/outline-server`  
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** ðŸ”„ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð² Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ

#### ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Outline Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ

Outline VPN Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ **Shadowsocks** Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð», ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð² userspace:
- âœ… ÐÐµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ kernel modules
- âœ… Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‡ÐµÑ€ÐµÐ· ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ðµ TCP/UDP sockets
- âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð½Ð° OpenVZ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾Ð¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
- âœ… ÐžÑ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¾Ñ‚ Google Jigsaw

#### ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
```bash
curl -sSL https://raw.githubusercontent.com/Jigsaw-Code/outline-server/master/src/server_manager/install_scripts/install_server.sh | bash
```

---

## Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ OpenVZ

### Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ OpenVZ?

OpenVZ - ÑÑ‚Ð¾ **container-based virtualization** Ð´Ð»Ñ Linux:
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ **Ð¾Ð´Ð¸Ð½ Ð¾Ð±Ñ‰Ð¸Ð¹ kernel** Ð´Ð»Ñ Ð²ÑÐµÑ… ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
- ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ñ‡ÐµÑ€ÐµÐ· namespaces Ð¸ cgroups
- Ð›ÐµÐ³Ñ‡Ðµ Ð¸ Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ Ð¿Ð¾Ð»Ð½Ð¾Ð¹ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ (KVM), Ð½Ð¾ Ð¼ÐµÐ½ÐµÐµ Ð³Ð¸Ð±ÐºÐ¸Ð¹

### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ

| Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ | KVM | OpenVZ |
|---------|-----|--------|
| Ð¡Ð¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ´Ñ€Ð¾ | âœ… Ð”Ð° | âŒ ÐÐµÑ‚ (shared kernel) |
| Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° kernel modules | âœ… Ð”Ð° | âŒ ÐÐµÑ‚ |
| TUN/TAP device | âœ… Ð”Ð° | âš ï¸ Ð§Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾ (Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð° Ñ…Ð¾ÑÑ‚Ðµ) |
| WireGuard kernel module | âœ… Ð”Ð° | âŒ Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ñ…Ð¾ÑÑ‚ |
| WireGuard userspace (wireguard-go) | âœ… Ð”Ð° | âœ… Ð”Ð° (ÐµÑÐ»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½) |
| Shadowsocks | âœ… Ð”Ð° | âœ… Ð”Ð° |
| OpenVPN | âœ… Ð”Ð° | âœ… Ð”Ð° |

### ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ WireGuard Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚?

1. **Kernel Module Dependency**
   ```bash
   # ÐÐ° KVM Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ:
   modprobe wireguard
   
   # ÐÐ° OpenVZ ÑÑ‚Ð¾ Ð²ÐµÑ€Ð½ÐµÑ‚:
   modprobe: ERROR: could not insert 'wireguard': Operation not permitted
   ```

2. **TUN Device**
   ```bash
   # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ:
   ls -la /dev/net/tun
   # crw-rw-rw- 1 root root 10, 200 Oct 28 12:00 /dev/net/tun
   # Ð£ÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾ ÐµÑÑ‚ÑŒ, Ð½Ð¾ kernel module Ð´Ð»Ñ WireGuard Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚
   ```

3. **Shared Kernel Architecture**
   - Ð¥Ð¾ÑÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ `2.6.32-042stab162.2` (ÑÑ‚Ð°Ñ€Ð¾Ðµ ÑÐ´Ñ€Ð¾)
   - WireGuard Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ kernel 5.6+ Ð´Ð»Ñ Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð¾Ð¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸
   - Ð˜Ð»Ð¸ userspace implementation (wireguard-go)

---

## Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ

### Ð ÐµÑˆÐµÐ½Ð¸Ðµ 1: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ wireguard-go Ð½Ð° Ñ…Ð¾ÑÑ‚ (Ð Ð•ÐšÐžÐœÐ•ÐÐ”Ð£Ð•Ð¢Ð¡Ð¯)

**Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ SSH root Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð¤Ð˜Ð—Ð˜Ð§Ð•Ð¡ÐšÐžÐœÐ£ Ñ…Ð¾ÑÑ‚Ñƒ** (Ð½Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñƒ)

```bash
# ÐÐ° Ñ…Ð¾ÑÑ‚-Ð½Ð¾Ð´Ðµ OpenVZ
apt update
apt install wireguard-tools wireguard-go -y

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°
which wireguard-go
# /usr/bin/wireguard-go
```

Ð—Ð°Ñ‚ÐµÐ¼ Ð² docker-compose Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ:
```yaml
environment:
  - WG_QUICK_USERSPACE_IMPLEMENTATION=wireguard-go
volumes:
  - /usr/bin/wireguard-go:/usr/bin/wireguard-go:ro
```

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ñ…Ð¾ÑÑ‚-ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ OpenVZ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñƒ Ð½Ð°Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð½Ðµ Ð±Ñ‹Ñ‚ÑŒ.

---

### Ð ÐµÑˆÐµÐ½Ð¸Ðµ 2: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Outline VPN (Ð¢Ð•ÐšÐ£Ð©Ð˜Ð™ ÐŸÐžÐ”Ð¥ÐžÐ”) âœ…

**ÐÐµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ñ…Ð¾ÑÑ‚Ñƒ**

Outline Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð² userspace Ñ‡ÐµÑ€ÐµÐ· Shadowsocks:
```
Client (Outline app) â†’ Shadowsocks protocol â†’ Outline Server (Docker) â†’ Internet
```

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° Ð»ÑŽÐ±Ð¾Ð¹ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
- âœ… ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¾Ð´Ð½Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹
- âœ… GUI Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ (Outline Manager)
- âœ… ÐšÐ»Ð¸ÐµÐ½Ñ‚Ñ‹ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼ (Windows, Android, iOS, macOS, Linux)
- âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ»ÑŽÑ‡ÐµÐ¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°
- âœ… ÐžÐ±Ñ„ÑƒÑÐºÐ°Ñ†Ð¸Ñ Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ° (ÑÐ»Ð¾Ð¶Ð½ÐµÐµ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ)

**ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:**
- âš ï¸ ÐÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ WireGuard (~5-10%)
- âš ï¸ ÐœÐµÐ½ÑŒÑˆÐµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ VPN, Ð½ÐµÑ‚ mesh networking)

---

### Ð ÐµÑˆÐµÐ½Ð¸Ðµ 3: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ OpenVPN

**ÐšÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ, 100% Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° OpenVZ**

```bash
docker run -d --name=openvpn-server \
  --cap-add=NET_ADMIN \
  -p 1194:1194/udp \
  -v /opt/vpn/openvpn:/etc/openvpn \
  kylemanna/openvpn
```

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° OpenVZ
- âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ñ 2001 Ð³Ð¾Ð´Ð°
- âœ… ÐœÐ½Ð¾Ð³Ð¾ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸
- âœ… Flexible ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

**ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:**
- âŒ ÐœÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ WireGuard (Ð² 2-3 Ñ€Ð°Ð·Ð°)
- âŒ Ð¡Ð»Ð¾Ð¶Ð½ÐµÐµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°
- âŒ Ð‘Ð¾Ð»ÑŒÑˆÐµ Ð¾Ð²ÐµÑ€Ñ…ÐµÐ´ (TCP + SSL/TLS)

---

### Ð ÐµÑˆÐµÐ½Ð¸Ðµ 4: Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³ Ð½Ð° KVM Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ

**ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**

ÐŸÑ€Ð¾Ð²Ð°Ð¹Ð´ÐµÑ€Ñ‹ Ñ KVM:
- DigitalOcean (Ð¾Ñ‚ $6/Ð¼ÐµÑ)
- Vultr (Ð¾Ñ‚ $5/Ð¼ÐµÑ)
- Hetzner (Ð¾Ñ‚ â‚¬4.5/Ð¼ÐµÑ)
- Linode (Ð¾Ñ‚ $5/Ð¼ÐµÑ)

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… WireGuard Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð¾
- âœ… ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ Ð½Ð°Ð´ kernel
- âœ… ÐœÐ¾Ð¶Ð½Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒ Ð»ÑŽÐ±Ñ‹Ðµ modules
- âœ… Ð›ÑƒÑ‡ÑˆÐ°Ñ Ð¸Ð·Ð¾Ð»ÑÑ†Ð¸Ñ

**ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:**
- âŒ Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ Ð´Ð°Ð½Ð½Ñ‹Ñ…
- âŒ ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ Ð½Ð° Ð²Ñ€ÐµÐ¼Ñ Ð¿ÐµÑ€ÐµÐ½Ð¾ÑÐ°
- âŒ ÐÑƒÐ¶Ð½Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ Ð·Ð°Ð½Ð¾Ð²Ð¾

---

## PowerShell Issues (ÐŸÐ¾Ð±Ð¾Ñ‡Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°)

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ heredoc ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸ÑÐ¾Ð¼

ÐŸÑ€Ð¸ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐµ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ñ‡ÐµÑ€ÐµÐ· SSH + PowerShell:

```powershell
ssh root@31.28.27.96 @"
cat > /opt/vpn/config.yaml << 'EOF'
content here
EOF
"@
```

**ÐžÑˆÐ¸Ð±ÐºÐ°:**
```
System.ArgumentOutOfRangeException: Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼.
ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€: top
Ð¡Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð±Ñ‹Ð»Ð¾ -7.
```

#### ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°
PowerShell here-string (`@"..."@`) ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚ÑƒÐµÑ‚ Ñ bash heredoc (`<< 'EOF'`). PowerShell Ð¿Ñ‹Ñ‚Ð°ÐµÑ‚ÑÑ Ð¿Ð°Ñ€ÑÐ¸Ñ‚ÑŒ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ ÐºÐ°Ðº Ñ‡Ð°ÑÑ‚ÑŒ ÑÐ²Ð¾ÐµÐ¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸.

#### ÐžÐ±Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð¿ÑƒÑ‚Ð¸
1. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð¸ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· SCP âœ… (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð»Ð¸)
2. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ `echo` Ñ ÑÐºÑ€Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼
3. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ `printf` Ð²Ð¼ÐµÑÑ‚Ð¾ heredoc
4. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ð¹ `bash` Ð²Ð¼ÐµÑÑ‚Ð¾ `PowerShell`

---

## Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ

### Ð§Ñ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ âœ…
- âœ… Docker ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- âœ… ÐŸÐ¾Ñ€Ñ‚Ñ‹ 51820/udp Ð¸ 51821/tcp Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹ Ð² firewall
- âœ… `/dev/net/tun` Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
- âœ… ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ (Ð½Ð¾ Ð¿Ð°Ð´Ð°ÑŽÑ‚)
- âœ… SCP/SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

### Ð§Ñ‚Ð¾ ÐÐ• Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ âŒ
- âŒ linuxserver/wireguard - Ð·Ð°Ð²Ð¸ÑÐ°ÐµÑ‚ Ð½Ð° init
- âŒ wg-easy - "Cannot find device wg0"
- âŒ wg-access-server - Ð½Ðµ Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚ WIREGUARD_PRIVATE_KEY
- âŒ WireGuard kernel module Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½

### Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ ðŸ”„
- ðŸ”„ Outline VPN ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° (Shadowsocks-based)
- ðŸ”„ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ð¾ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸ Outline

---

## Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

### ÐšÑ€Ð°Ñ‚ÐºÐ¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ (Ð¡ÐµÐ¹Ñ‡Ð°Ñ)
1. âœ… Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ Outline VPN
2. âœ… ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ñ Windows
3. âœ… ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ñ Android
4. âœ… Ð—Ð°Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ

### Ð¡Ñ€ÐµÐ´Ð½ÐµÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ (1-2 Ð½ÐµÐ´ÐµÐ»Ð¸)
1. Ð¡Ð²ÑÐ·Ð°Ñ‚ÑŒÑÑ Ñ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³-Ð¿Ñ€Ð¾Ð²Ð°Ð¹Ð´ÐµÑ€Ð¾Ð¼:
   - Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ `wireguard-go` Ð½Ð° Ñ…Ð¾ÑÑ‚-ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ
   - Ð˜Ð»Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð°Ð¿Ð³Ñ€ÐµÐ¹Ð´ kernel Ð´Ð¾ 5.6+
   - Ð˜Ð»Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ Ð½Ð° KVM
2. Ð•ÑÐ»Ð¸ Ñ…Ð¾ÑÑ‚ÐµÑ€ Ð½Ðµ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ - Ñ€Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ Ð½Ð° KVM-Ð¿Ñ€Ð¾Ð²Ð°Ð¹Ð´ÐµÑ€Ð°

### Ð”Ð¾Ð»Ð³Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ (Ð•ÑÐ»Ð¸ WireGuard ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÐ½)
1. Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³ Ð½Ð° KVM Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ
2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ WireGuard Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð¾
3. Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¸Ð· ROADMAP.md

---

## Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹

### ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð´Ð»Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
systemd-detect-virt
# Ð’ÐµÑ€Ð½ÐµÑ‚: openvz

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° kernel
uname -r
# Ð’ÐµÑ€Ð½ÐµÑ‚: 2.6.32-042stab162.2

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° WireGuard module
lsmod | grep wireguard
# ÐŸÑƒÑÑ‚Ð¾ (Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½)

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° TUN device
ls -la /dev/net/tun
cat /sys/class/net/tun/uevent

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° capabilities ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°
docker run --rm -it --cap-add=NET_ADMIN alpine sh -c "ip link add wg0 type wireguard"
# Ð’ÐµÑ€Ð½ÐµÑ‚: Operation not supported
```

### Ð¡ÑÑ‹Ð»ÐºÐ¸ Ð½Ð° GitHub Issues

Ð­Ñ‚Ð° Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ð° Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ðµ:
- https://github.com/linuxserver/docker-wireguard/issues/115
- https://github.com/wg-easy/wg-easy/issues/256
- https://serverfault.com/questions/1073679/wireguard-in-docker-container-on-openvz

---

## Ð’Ñ‹Ð²Ð¾Ð´Ñ‹

OpenVZ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ **Ñ„ÑƒÐ½Ð´Ð°Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð¾ Ð½ÐµÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð°** Ñ WireGuard Ð±ÐµÐ·:
- Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ `wireguard-go` Ð½Ð° Ñ…Ð¾ÑÑ‚-ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
- Ð˜Ð»Ð¸ Ð°Ð¿Ð³Ñ€ÐµÐ¹Ð´Ð° kernel Ñ…Ð¾ÑÑ‚Ð° Ð´Ð¾ 5.6+
- Ð˜Ð»Ð¸ ÑÐ¼ÐµÐ½Ñ‹ Ð½Ð° KVM Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ

**ÐÐ°Ð¸Ð»ÑƒÑ‡ÑˆÐµÐµ ÐºÑ€Ð°Ñ‚ÐºÐ¾ÑÑ€Ð¾Ñ‡Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ:** Outline VPN (Shadowsocks)  
**ÐÐ°Ð¸Ð»ÑƒÑ‡ÑˆÐµÐµ Ð´Ð¾Ð»Ð³Ð¾ÑÑ€Ð¾Ñ‡Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° KVM Ñ WireGuard

---

**ÐÐ²Ñ‚Ð¾Ñ€ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°:** GitHub Copilot  
**Ð”Ð°Ñ‚Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ:** 28 Ð¾ÐºÑ‚ÑÐ±Ñ€Ñ 2025, 16:10 UTC
