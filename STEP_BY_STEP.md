# üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ó–∞–ø—É—Å–∫ VPN

> **–ß–∏—Ç–∞–π—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∫–∞–∂–¥—ã–π —à–∞–≥. –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –Ω–∏—á–µ–≥–æ.**

---

## –®–ê–ì 1: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### –ö–æ–º–∞–Ω–¥–∞ (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ):

```powershell
ssh root@31.28.27.96 "cd /opt/vpn && docker compose down 2>&1"
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
Container wireguard  Stopping
Container wireguard  Stopped
Container wireguard  Removed
```

–ò–ª–∏:
```
no such service: wireguard
```

**–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ ‚Äî –Ω–æ—Ä–º–∞!**

‚úÖ **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ**

---

## –®–ê–ì 2: –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π docker-compose.yml

### –ö–æ–º–∞–Ω–¥–∞ 1: –ë—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–≥–æ —Ñ–∞–π–ª–∞

```powershell
ssh root@31.28.27.96 "cd /opt/vpn && cp docker-compose.yml docker-compose.yml.backup.$(date +%Y%m%d) 2>&1"
```

### –ö–æ–º–∞–Ω–¥–∞ 2: –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª

```powershell
ssh root@31.28.27.96 @"
cat > /opt/vpn/docker-compose.yml <<'ENDOFFILE'
services:
  wg-easy:
    image: ghcr.io/wg-easy/wg-easy:latest
    container_name: wg-easy
    cap_add:
      - NET_ADMIN
      - SYS_MODULE
    environment:
      - WG_HOST=31.28.27.96
      - PASSWORD=PocketPortal2025!Secure
      - WG_PORT=51820
      - WG_DEFAULT_ADDRESS=10.13.13.x
      - WG_DEFAULT_DNS=1.1.1.1,1.0.0.1
      - WG_ALLOWED_IPS=0.0.0.0/0,::/0
      - WG_PERSISTENT_KEEPALIVE=25
      - WG_MTU=1420
      - UI_TRAFFIC_STATS=true
      - UI_CHART_TYPE=1
      - LANG=ru
    volumes:
      - ./config:/etc/wireguard
    ports:
      - 51820:51820/udp
      - 51821:51821/tcp
    devices:
      - /dev/net/tun:/dev/net/tun
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
      - net.ipv4.ip_forward=1
    restart: unless-stopped
ENDOFFILE
"@
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
–ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—Ç –≤ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (–±–µ–∑ –æ—à–∏–±–æ–∫)

‚úÖ **–ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

---

## –®–ê–ì 3: –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç –¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏

### –ö–æ–º–∞–Ω–¥–∞:

```powershell
ssh root@31.28.27.96 "sudo ufw allow 51821/tcp comment 'wg-easy web UI' 2>&1"
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
Rule added
Rule added (v6)
```

–ò–ª–∏:
```
ERROR: Could not load logging rules
```
(–≠—Ç–æ —Ç–æ–∂–µ –Ω–æ—Ä–º–∞ ‚Äî UFW –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω)

‚úÖ **–ü–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

---

## –®–ê–ì 4: –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∏ –∑–∞–ø—É—Å–∫–∞–µ–º

### –ö–æ–º–∞–Ω–¥–∞ 1: –ë—ç–∫–∞–ø —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤

```powershell
ssh root@31.28.27.96 "cd /opt/vpn && tar -czf config.backup.$(date +%Y%m%d_%H%M%S).tar.gz config/ 2>&1"
```

### –ö–æ–º–∞–Ω–¥–∞ 2: –û—á–∏—Å—Ç–∫–∞

```powershell
ssh root@31.28.27.96 "cd /opt/vpn && rm -rf config/* 2>&1"
```

### –ö–æ–º–∞–Ω–¥–∞ 3: –ó–ê–ü–£–°–ö!

```powershell
ssh root@31.28.27.96 "cd /opt/vpn && docker compose pull && docker compose up -d 2>&1"
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
Pulling wg-easy ... done
Creating wg-easy ... done
```

‚úÖ **–ü–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ!)**

---

## –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–æ–º–∞–Ω–¥–∞:

```powershell
ssh root@31.28.27.96 "docker ps | grep wg-easy 2>&1"
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
abc123def456   ghcr.io/wg-easy/wg-easy   Up X seconds   0.0.0.0:51820->51820/udp, 0.0.0.0:51821->51821/tcp
```

**–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ:** `Up` (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω)

‚úÖ **–ü–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

---

## –®–ê–ì 6: –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ (—á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å—ë –û–ö)

### –ö–æ–º–∞–Ω–¥–∞:

```powershell
ssh root@31.28.27.96 "docker logs wg-easy 2>&1 | tail -20"
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞:
```
‚úÖ Web UI available at http://0.0.0.0:51821
```

‚úÖ **–ü–æ–∫–∞–∂–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤**

---

## –®–ê–ì 7: –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤–µ–±-–ø–∞–Ω–µ–ª—å

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä

### 2. –í—Å—Ç–∞–≤—å—Ç–µ –∞–¥—Ä–µ—Å:
```
http://31.28.27.96:51821
```

### 3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:
```
PocketPortal2025!Secure
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- –ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å wg-easy
- –ö–Ω–æ–ø–∫—É "+ New Client"
- –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤

‚úÖ **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –ø–æ–∫–∞–∂–∏—Ç–µ**

---

## –®–ê–ì 8: –î–æ–±–∞–≤–ª—è–µ–º –≤–∞—à –ø–µ—Ä–≤—ã–π –∫–ª–∏–µ–Ω—Ç

### –í –≤–µ–±-–ø–∞–Ω–µ–ª–∏:

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"+ New Client"**
2. –í –ø–æ–ª–µ Name –≤–≤–µ–¥–∏—Ç–µ: `marina-test`
3. –ù–∞–∂–º–∏—Ç–µ **"Create"**

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- –ü–æ—è–≤–∏–ª—Å—è –∫–ª–∏–µ–Ω—Ç `marina-test`
- –†—è–¥–æ–º —Å –Ω–∏–º –∫–Ω–æ–ø–∫–∏: QR Code, Download, Enable/Disable

‚úÖ **–°–∫—Ä–∏–Ω—à–æ—Ç**

---

## –®–ê–ì 9: –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ VPN

### –î–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (iPhone/Android):

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **WireGuard** –∏–∑ App Store –∏–ª–∏ Google Play
2. –í –≤–µ–±-–ø–∞–Ω–µ–ª–∏ –Ω–∞–∂–º–∏—Ç–µ **QR Code** —Ä—è–¥–æ–º —Å `marina-test`
3. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ WireGuard –Ω–∞–∂–º–∏—Ç–µ **"+"** ‚Üí **"Scan from QR code"**
4. –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ QR-–∫–æ–¥
5. –ù–∞–∂–º–∏—Ç–µ **"Allow"** ‚Üí **"Activate"**

### –î–ª—è –Ω–æ—É—Ç–±—É–∫–∞:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [WireGuard](https://www.wireguard.com/install/)
2. –í –≤–µ–±-–ø–∞–Ω–µ–ª–∏ –Ω–∞–∂–º–∏—Ç–µ **Download** —Ä—è–¥–æ–º —Å `marina-test`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª `marina-test.conf`
4. –í WireGuard: **Import tunnel(s) from file**
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª ‚Üí **Activate**

---

## –®–ê–ì 10: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ VPN —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ VPN –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ/–Ω–æ—É—Ç–±—É–∫–µ

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ https://whoer.net

### –ß—Ç–æ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
IP: 31.28.27.96
Country: Russia
```

‚úÖ **–ï—Å–ª–∏ IP = 31.28.27.96 ‚Äî –í–°–Å –†–ê–ë–û–¢–ê–ï–¢!** üéâ

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```powershell
ssh root@31.28.27.96 "docker logs wg-easy 2>&1"
```
–ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ –ª–æ–≥–∏.

### –í–µ–±-–ø–∞–Ω–µ–ª—å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
```powershell
ssh root@31.28.27.96 "sudo ss -lntp | grep 51821 2>&1"
```
–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ —Å `51821`. –ü–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### VPN –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç:
```powershell
ssh root@31.28.27.96 "docker exec wg-easy wg show 2>&1"
```
–ü–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## üìû –°–≤—è–∑—å

–ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ:
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
3. –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ
4. –ñ–¥—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –ø–æ—Ç–æ–º –¥–∞—é —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**–ü–æ–µ—Ö–∞–ª–∏! –ù–∞—á–Ω–µ–º —Å –®–ê–ì–∞ 1?** üöÄ
